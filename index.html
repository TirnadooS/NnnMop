<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NnnMop ‚Äî Cyberpunk Terminal</title>

<!-- –®—Ä–∏—Ñ—Ç—ã –∏ –∏–∫–æ–Ω–∫–∏ -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet" />
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>

<style>
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0;
    height: 100%;
    font-family: 'Orbitron', monospace;
    background: #080818;
    color: #00fff7;
    overflow-x: hidden;
    user-select: none;
  }
  h1, h3 {
    text-align: center;
    text-shadow: 0 0 10px #00fff7;
  }
  h1 {
    margin-top: 1rem;
    font-size: 3rem;
  }
  h3 {
    color: #ff00ff;
    margin-bottom: 1rem;
  }
  main {
    max-width: 960px;
    margin: 1rem auto 4rem;
    padding: 0 1rem;
  }
  .menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1.2rem;
  }
  .menu-item {
    background: rgba(30, 10, 60, 0.8);
    border: 1px solid #ff00ff;
    border-radius: 12px;
    box-shadow: 0 0 12px #ff00ff;
    padding: 1rem;
    text-align: center;
    transition: box-shadow 0.3s ease;
  }
  .menu-item:hover {
    box-shadow: 0 0 20px #00fff7, 0 0 30px #ff00ff;
  }
  .menu-item h4 {
    margin-bottom: 0.5rem;
    font-weight: 700;
  }
  .menu-item p {
    font-size: 1.1rem;
    margin-bottom: 1rem;
  }
  .menu-item button {
    background: linear-gradient(45deg, #ff00ff, #9d00ff);
    border: none;
    padding: 0.6rem 1.2rem;
    color: #00fff7;
    font-weight: 700;
    cursor: pointer;
    border-radius: 8px;
    text-shadow: 0 0 5px #00fff7;
    transition: background 0.3s ease;
  }
  .menu-item button:hover {
    background: linear-gradient(45deg, #00fff7, #5500ff);
  }

  /* –ö–Ω–æ–ø–∫–∏ –∏–∫–æ–Ω–∫–∏ –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ */
  .floating-btn {
    position: fixed;
    bottom: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 20px #00fff7;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.25s ease;
    user-select: none;
    background: linear-gradient(45deg, #00fff7, #5500ff);
    z-index: 1100;
  }
  .floating-btn:hover {
    transform: scale(1.1);
  }
  #chatbot-btn {
    right: 20px;
  }
  #cart-btn {
    right: 90px;
  }
  .floating-btn i {
    color: #080818;
    font-size: 1.8rem;
  }
  #cart-count {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #ff00ff;
    color: #080818;
    font-weight: 700;
    font-size: 0.8rem;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* –ü–ª–∞–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–µ) */
  .floating-window {
    position: fixed;
    width: 320px;
    max-height: 480px;
    background: rgba(20, 10, 40, 0.95);
    border-radius: 14px;
    border: 1px solid #ff00ff;
    box-shadow: 0 0 18px #ff00ff;
    display: flex;
    flex-direction: column;
    z-index: 1099;
    overflow: hidden;
    backdrop-filter: blur(10px);
    color: #00fff7;
    cursor: default;
    user-select: none;
    display: none;
  }
  #chatbot-window {
    right: 20px;
    bottom: 90px;
  }
  #cart-window {
    right: 90px;
    bottom: 90px;
  }
  .floating-window header {
    background: linear-gradient(45deg, #ff00ff, #9d00ff);
    padding: 12px;
    font-weight: 700;
    font-size: 1.2rem;
    color: #00fff7;
    text-align: center;
    user-select: none;
    box-shadow: 0 0 8px #ff00ff inset;
    cursor: move;
    position: relative;
  }
  .floating-window header button.close-btn {
    position: absolute;
    right: 12px;
    top: 12px;
    background: none;
    border: none;
    font-size: 1.4rem;
    color: #00fff7;
    cursor: pointer;
    user-select: none;
  }
  .floating-window .content {
    padding: 12px 15px;
    overflow-y: auto;
    flex-grow: 1;
    font-size: 0.95rem;
  }
  .floating-window .content::-webkit-scrollbar {
    width: 6px;
  }
  .floating-window .content::-webkit-scrollbar-thumb {
    background: #ff00ff;
    border-radius: 3px;
  }

  /* –ß–∞—Ç */
  #chat-messages {
    margin-bottom: 8px;
  }
  #chat-messages p {
    margin: 6px 0;
  }
  #chat-input-area {
    display: flex;
    border-top: 1px solid #ff00ff;
  }
  #chat-input {
    flex-grow: 1;
    padding: 8px;
    border: none;
    outline: none;
    font-family: 'Orbitron', monospace;
    font-size: 1rem;
    background: #080818;
    color: #00fff7;
  }
  #chat-send-btn {
    background: #ff00ff;
    border: none;
    color: #00fff7;
    padding: 0 18px;
    cursor: pointer;
    font-weight: 700;
    transition: background 0.3s ease;
  }
  #chat-send-btn:hover {
    background: #9d00ff;
  }

  /* –ö–æ—Ä–∑–∏–Ω–∞ */
  #cart-list {
    max-height: 220px;
    overflow-y: auto;
    margin-bottom: 12px;
  }
  #cart-list p {
    margin: 6px 0;
    border-bottom: 1px dotted #ff00ff;
    padding-bottom: 4px;
  }
  #cart-total {
    font-weight: 700;
    margin-bottom: 12px;
    text-align: right;
    font-size: 1.1rem;
  }
  #order-form input {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border-radius: 6px;
    border: 1px solid #ff00ff;
    background: #080818;
    color: #00fff7;
    font-family: 'Orbitron', monospace;
    font-size: 0.9rem;
  }
  #order-form button {
    width: 100%;
    padding: 10px;
    background: linear-gradient(45deg, #ff00ff, #9d00ff);
    border: none;
    border-radius: 10px;
    font-weight: 700;
    font-size: 1.1rem;
    color: #00fff7;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #order-form button:hover {
    background: linear-gradient(45deg, #00fff7, #5500ff);
  }

  button:active {
    transform: scale(0.97);
  }

  @media (max-width: 420px) {
    .floating-window {
      width: 90vw !important;
    }
  }
  /* –ö–∏–±–µ—Ä –¥–æ–∂–¥—å canvas */
  canvas#cyberRain {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    pointer-events: none;
    background: #080818;
  }
</style>
</head>
<body>

<canvas id="cyberRain"></canvas>

<h1>NnnMop</h1>
<h3>Cyberpunk Food Terminal</h3>

<main>
  <div class="menu" id="menu"></div>
</main>

<div class="floating-btn" id="chatbot-btn" title="–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç">
  <i class="fas fa-robot"></i>
</div>

<div class="floating-btn" id="cart-btn" title="–û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É">
  <i class="fas fa-shopping-cart"></i>
  <span id="cart-count">0</span>
</div>

<section class="floating-window" id="chatbot-window" aria-label="–ß–∞—Ç —Å AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º">
  <header>ü§ñ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç
    <button class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å —á–∞—Ç">&times;</button>
  </header>
  <div class="content" id="chat-messages" tabindex="0">
    <p><em>–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –ø–æ–º–æ—â—å.</em></p>
  </div>
  <div id="chat-input-area">
    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." aria-label="–ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è" />
    <button id="chat-send-btn" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">‚ñ∂</button>
  </div>
</section>

<section class="floating-window" id="cart-window" aria-label="–ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–∫–∞–∑–æ–≤">
  <header>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞
    <button class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É">&times;</button>
  </header>
  <div class="content" id="cart-list" tabindex="0">
    <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
  </div>
  <div id="cart-total">–ò—Ç–æ–≥–æ: 0 NOK</div>
  <form id="order-form" autocomplete="off">
    <input type="text" id="order-name" name="name" placeholder="–í–∞—à–µ –∏–º—è" required />
    <input type="text" id="order-address" name="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" required />
    <input type="tel" id="order-phone" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required pattern="[\d\+\-\s]+" />
    <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</section>

<script>
  // –ö–∏–±–µ—Ä –¥–æ–∂–¥—å
  (() => {
    const canvas = document.getElementById('cyberRain');
    const ctx = canvas.getContext('2d');
    let width, height;
    let drops = [];
    const maxDrops = 150;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    }
    window.addEventListener('resize', resize);
    resize();

    class Drop {
      constructor() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.length = 10 + Math.random() * 20;
        this.speed = 4 + Math.random() * 4;
        this.opacity = 0.1 + Math.random() * 0.4;
        this.width = 1;
      }
      fall() {
        this.y += this.speed;
        if (this.y > height) {
          this.y = -this.length;
          this.x = Math.random() * width;
        }
      }
      draw() {
        ctx.beginPath();
        const gradient = ctx.createLinearGradient(this.x, this.y, this.x, this.y + this.length);
        gradient.addColorStop(0, `rgba(0, 255, 255, ${this.opacity})`);
        gradient.addColorStop(1, 'rgba(0, 255, 255, 0)');
        ctx.strokeStyle = gradient;
        ctx.lineWidth = this.width;
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x, this.y + this.length);
        ctx.stroke();
      }
    }

    for (let i = 0; i < maxDrops; i++) {
      drops.push(new Drop());
    }

    function animate() {
      ctx.clearRect(0, 0, width, height);
      drops.forEach(drop => {
        drop.fall();
        drop.draw();
      });
      requestAnimationFrame(animate);
    }
    animate();
  })();

  // –ú–µ–Ω—é –∏ –∫–æ—Ä–∑–∏–Ω–∞
  const menu = [
    { name: '–°—É—à–∏-—Å–µ—Ç', price: 300 },
    { name: '–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞', price: 200 },
    { name: '–ë—É—Ä–≥–µ—Ä –ö–ª–∞—Å—Å–∏–∫', price: 180 },
    { name: '–¢–∞–π—Å–∫–∞—è –ª–∞–ø—à–∞', price: 250 },
    { name: '–ö–∏–±–µ—Ä —Ä–æ–ª–ª—ã', price: 320 },
    { name: '–ù–µ–æ–Ω–æ–≤—ã–π –Ω–∞–ø–∏—Ç–æ–∫', price: 120 }
  ];

  const menuDiv = document.getElementById('menu');
  const cartList = document.getElementById('cart-list');
  const cartTotalDiv = document.getElementById('cart-total');
  const cartCountSpan = document.getElementById('cart-count');

  let cart = [];

  function renderMenu() {
    menu.forEach((item, i) => {
      const div = document.createElement('div');
      div.classList.add('menu-item');
      div.innerHTML = `
        <h4>${item.name}</h4>
        <p>${item.price} NOK</p>
        <button aria-label="–î–æ–±–∞–≤–∏—Ç—å ${item.name} –≤ –∫–æ—Ä–∑–∏–Ω—É" data-index="${i}">–î–æ–±–∞–≤–∏—Ç—å</button>
      `;
      menuDiv.appendChild(div);
    });
  }
  renderMenu();

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
  menuDiv.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') {
      const idx = +e.target.dataset.index;
      cart.push(menu[idx]);
      updateCartUI();
      playClickSound();
    }
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
  function updateCartUI() {
    if (cart.length === 0) {
      cartList.innerHTML = '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
      cartTotalDiv.textContent = '–ò—Ç–æ–≥–æ: 0 NOK';
      cartCountSpan.textContent = '0';
      return;
    }
    cartList.innerHTML = '';
    cart.forEach((item, idx) => {
      const p = document.createElement('p');
      p.textContent = `${item.name} - ${item.price} NOK`;
      const delBtn = document.createElement('button');
      delBtn.textContent = '√ó';
      delBtn.title = '–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä';
      delBtn.style = `
        margin-left:8px;
        background:#ff00ff;
        color:#080818;
        border:none;
        font-weight:bold;
        border-radius:50%;
        width:22px;
        height:22px;
        cursor:pointer;
      `;
      delBtn.addEventListener('click', () => {
        cart.splice(idx, 1);
        updateCartUI();
        playClickSound();
      });
      p.appendChild(delBtn);
      cartList.appendChild(p);
    });
    const total = cart.reduce((sum, i) => sum + i.price, 0);
    cartTotalDiv.textContent = `–ò—Ç–æ–≥–æ: ${total} NOK`;
    cartCountSpan.textContent = cart.length;
  }

  // –ü–ª–∞–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∏
  const chatbotBtn = document.getElementById('chatbot-btn');
  const chatbotWindow = document.getElementById('chatbot-window');
  const cartBtn = document.getElementById('cart-btn');
  const cartWindow = document.getElementById('cart-window');

  chatbotBtn.addEventListener('click', () => {
    if (chatbotWindow.style.display === 'flex') chatbotWindow.style.display = 'none';
    else {
      chatbotWindow.style.display = 'flex';
      chatbotWindow.style.zIndex = 1100;
      chatbotWindow.focus();
    }
  });

  cartBtn.addEventListener('click', () => {
    if (cartWindow.style.display === 'flex') cartWindow.style.display = 'none';
    else {
      cartWindow.style.display = 'flex';
      cartWindow.style.zIndex = 1100;
      cartWindow.focus();
    }
  });

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ –æ–∫–Ω–∞—Ö
  document.querySelectorAll('.floating-window .close-btn').forEach(btn => {
    btn.addEventListener('click', e => {
      e.target.closest('.floating-window').style.display = 'none';
    });
  });

  // –ó–≤—É–∫–∏ –∫–ª–∏–∫–æ–≤
  const clickSound = new Audio('https://cdn.jsdelivr.net/gh/felixrieseberg/mini-sounds/c
